<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>访客通行</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <!-- 引入样式 -->
    <link rel="stylesheet" href="../css/ydui.rem.css">
    
    <!--引入自定义样式-->
    <link rel="stylesheet" type="text/css" href="../css/index.css"/>
    <link rel="stylesheet" href="../font/iconfont.css">
    <!--自定义icon-->
    <link rel="stylesheet" href="../font/iconfont.css">
    <script src="../js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/fastclick.js" type="text/javascript" charset="utf-8"></script>
    <!-- 引入rem自适应类库 -->
    <script src="../js/ydui.flexible.js"></script>
    <!-- 引入 Vue -->
	<script src="../js/vue.js"></script>
	<!-- 引入组件库 -->
	<script src="../js/ydui.js"></script>
	<script src="http://res.wx.qq.com/open/js/jweixin-1.2.0.js" type="text/javascript" charset="utf-8"></script>
	<style type="text/css">
		.point-text.his-code{
			text-align: center;
			margin-top: .2rem;
		}
		.point-text.his-code a{
			display: inline-block;
			padding: .2rem;
		}
	</style>
</head>
<body>
<div id="app" v-cloak>
	<div class="repair-sub">
		<yd-tab active-color="rgb(240,205,97)">
	        <yd-tab-panel label="一键开门">
	        	<div class="sub-tab">
	        		<div class="apply-body" style="padding: 0;">
						<div class="fastOpen" @click="openDoor">
							<div class="mask"></div>
							<img src="http://bucket-shwy.oss-cn-hangzhou.aliyuncs.com/wechat/image/door_btn1.png"/>
						</div>
						<div class="fastOpen" @click="openDoor">
							<div class="mask"></div>
							<img src="http://bucket-shwy.oss-cn-hangzhou.aliyuncs.com/wechat/image/door_btn2.png"/>
						</div>
					</div>
	        	</div>
	        </yd-tab-panel>
	        <yd-tab-panel label="预约通行">
	        	<div class="sub-tab">
	        		<div class="apply-body" style="padding: 0;">
						<div class="title">开始时间</div>
						<yd-cell-group>
					        
					        <yd-cell-item>
					            <yd-datetime type="datetime":end-date="datetime2" ref="datetime1" v-model="datetime1" slot="right" ></yd-datetime>
					            <span slot="right">
					            	<i class="icon iconfont icon-rili" style="font-size: .42rem;"/></i>
					            </span>
					        </yd-cell-item>
					    </yd-cell-group>
					    <div class="title" >结束时间</div>
						<yd-cell-group>
					        
					        <yd-cell-item>
					            <yd-datetime :start-date="datetime1" type="datetime"  v-model="datetime2" slot="right"></yd-datetime>
					            <span slot="right">
					            	<i class="icon iconfont icon-rili" style="font-size: .42rem;"/></i>
					            </span>
					        </yd-cell-item>
					    </yd-cell-group>
					    <div class="point-text">
					    	访客二维码即时生成，请妥善保管
					    </div>
					    <yd-button-group>
							<yd-button size="large" type="danger"  @click.native="applyQRcode" :disabled='isDisabled'>申请二维码</yd-button>
						</yd-button-group>
						<div class="point-text his-code">
					    	<a href="./QRcodeHis.html">历史记录</a>
					    </div>
					</div>
	        	</div>
	        </yd-tab-panel>
	        
	    </yd-tab>
	</div>
</div>

<script>
	$(function() {
		    FastClick.attach(document.body);
		    new Vue({
		        el: '#app',
		        data:{
		        	datetime1:'2012-03-16 15:13',
		        	datetime2: '',
		        	isDisabled:false
		        },
		        methods: {
		            applyQRcode:function(){
		            	this.isDisabled=true;
		           		//this.$dialog.loading.open('提交中');
						window.location.href="./result.html"
//		                setTimeout(() => {
//		                	
//		                    this.$dialog.loading.close();
//		                    
//		                }, 2000);
		            },
		            openDoor:function(){
		            	this.$dialog.toast({
		                    mes: '开门成功',
		                    timeout: 1500,
		                    icon: 'success'
		                });
		            }
		        },
		        beforeMount:function(){
		        	
		        }
		        
		    })
		});
    
</script>
</body>
</html>